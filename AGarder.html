// ------------------------------------------------------------------------------------------
// Pour importer des modules JS
// ------------------------------------------------------------------------------------------
function include(file) {
    var oScript =  document.createElement("script");
    oScript.src = file;
    oScript.type = "text/javascript";
    document.body.appendChild(oScript);
}
 
// On l'utilise :
include("js/test.js");

// ------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------

// -------------------    Outil de "Stop Animation"   --------------------------
// --- Fonction d'arrÃªt de l'animation 
// (ne sert qu'au developpement Etat normal : "En commentaires")) -
// -----------------------------------------------------------------------------
    window.addEventListener('click', function(){
      if (vilCoyote.animationOn) {
        vilCoyote.animationOn = false;
        energyBall[0].animationOn = false;
        vautour[0].animationOn = false;
        fondEcranSol.idFondEcran.style.animationPlayState = 'paused';
        fondEcranNuages.idFondEcran.style.animationPlayState = 'paused';
      } else {
        vilCoyote.animationOn = true;
        energyBall[0].animationOn = true;
        vautour[0].animationOn = true;
        fondEcranSol.idFondEcran.style.animationPlayState = 'running';
        fondEcranNuages.idFondEcran.style.animationPlayState = 'running';
        vilCoyote.animationCaller();
      }
    });


// ------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------------
    // -------------------    Outil de "Keybd Witness"   --------------------------
    // -------------------    Dans la partie HTML   --------------------------

    <!-- div{id="idTouche$" class="rond"}*8 -->
    <!-- Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->
    <!-- <div  class="kbdWitness">
      <h2 id="idValueMatrixKbdWitness">0</h2> 
      <div id="idTouche1" class="rond">ðŸ¡¤</div>
      <div id="idTouche2" class="rond"></div>
      <div id="idTouche3" class="rond">ðŸ”²</div>
      <div id="idTouche4" class="rond">â® </div>
      <div id="idTouche5" class="rond">ðŸ¡³</div>
      <div id="idTouche6" class="rond">ðŸ¡±</div>
      <div id="idTouche7" class="rond">ðŸ¡°</div>
      <div id="idTouche8" class="rond">ðŸ¡²</div>
    </div> -->
    <!-- Fin Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->

        ObjectKeyboardMgr.prototype.gereAppuiTouche = function(event){
            this.idxKeyOnCode = this.tabKeyIndexes.indexOf(event.keyCode);
            if (this.idxKeyOnCode>-1){
                this.bitMask = this.keyMap[this.idxKeyOnCode].valueAffectedBit;  // RÃ©cupÃ©ration du bit dans la matrice correspondant Ã  la touche
                this.keyPressedMatrix = this.keyPressedMatrix | this.bitMask;    // "OU" logique pour positionner le bit correspondant dans la matrice

                if (this.gestionKbdOnEnCours === false){
                    this.idActionOnMgrInterval = window.setInterval(this.actionOnMgr.bind(this),this.keyboardSpeed);
                    this.gestionKbdOnEnCours = true;
                }

                // // Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->
                // this.keyMap[this.idxKeyOnCode].witnessButton.style.backgroundColor = 'green';
                // this.valueMatrixKbdWitness.innerHTML=this.keyPressedMatrix;
                // // Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->
            }
        }
    // -------------------    Dans la partie KeybordMgr   --------------------------
            ObjectKeyboardMgr.prototype.gereAppuiTouche = function(event){
            this.idxKeyOnCode = this.tabKeyIndexes.indexOf(event.keyCode);
            if (this.idxKeyOnCode>-1){
                this.bitMask = this.keyMap[this.idxKeyOnCode].valueAffectedBit;  // RÃ©cupÃ©ration du bit dans la matrice correspondant Ã  la touche
                this.keyPressedMatrix = this.keyPressedMatrix | this.bitMask;    // "OU" logique pour positionner le bit correspondant dans la matrice

                if (this.gestionKbdOnEnCours === false){
                    this.idActionOnMgrInterval = window.setInterval(this.actionOnMgr.bind(this),this.keyboardSpeed);
                    this.gestionKbdOnEnCours = true;
                }

                // // Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->
                // this.keyMap[this.idxKeyOnCode].witnessButton.style.backgroundColor = 'green';
                // this.valueMatrixKbdWitness.innerHTML=this.keyPressedMatrix;
                // // Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->
            }
        }
        // --------------------------------------------------------------
        ObjectKeyboardMgr.prototype.gereReleaseTouche = function(event){

        this.idxKeyOffCode = this.tabKeyIndexes.indexOf(event.keyCode);
        if (this.idxKeyOffCode>-1){ 
            this.actionOffMgr();

            // // Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   
            // this.bitMask = this.keyMap[this.idxKeyOffCode].valueAffectedBit;  // RÃ©cupÃ©ration du bit dans la matrice correspondant Ã  la touche relachÃ©e
            // this.bitMask = ~(this.bitMask);
            // this.keyPressedMatrix = (this.keyPressedMatrix & (this.bitMask)); // Mise a 0 des bits filtrÃ©s et selection du seul bit utile (&) 
            // this.keyMap[this.idxKeyOffCode].witnessButton.style.backgroundColor = 'red';
            // this.valueMatrixKbdWitness.innerHTML=(this.keyPressedMatrix & (this.keyPressedMatrix & this.bitMask));          
            // // Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   
        }
        };  

        // -------------------    Dans la partie VilCoyote   --------------------------
        Sprite.prototype.initVarMod  = function(){
        this.initVar();
        this.keyboardMgr = new ObjectKeyboardMgr();

        //   affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->
        // this.keyboardMgr.valueMatrixKbdWitness = document.getElementById('idValueMatrixKbdWitness'); 
        // this.keyboardMgr.keyMap[0].witnessButton = document.getElementById('idTouche1');   // Touche "ESC"
        // this.keyboardMgr.keyMap[1].witnessButton = document.getElementById('idTouche2');   // Touche libre et disponible pour un usage futur
        // this.keyboardMgr.keyMap[2].witnessButton = document.getElementById('idTouche3');   // Touche "ESPACE"
        // this.keyboardMgr.keyMap[3].witnessButton = document.getElementById('idTouche4');   // Touche "ENTREE"
        // this.keyboardMgr.keyMap[4].witnessButton = document.getElementById('idTouche5');   // Touche "Fleche BAS"
        // this.keyboardMgr.keyMap[5].witnessButton = document.getElementById('idTouche6');   // Touche "Fleche HAUT"
        // this.keyboardMgr.keyMap[6].witnessButton = document.getElementById('idTouche7');   // Touche "Fleche GAUCHE"
        // this.keyboardMgr.keyMap[7].witnessButton = document.getElementById('idTouche8');   // Touche "Fleche DROIT"
        // Fin Outil affichant le statut des touches appuyÃ©es (ne sert qu'au developpement Etat normal : "En commentaires"))   -->

        };
        // -------------------    Dans la partie CSS   --------------------------
 
        /* ---- Outil pour debuggage clavier - En commentaires en Production --------------- */
        /* ---- Outil pour debuggage clavier - En commentaires en Production --------------- */
        /* ---- Outil pour debuggage clavier - En commentaires en Production --------------- */
        
        /* .kbdWitness{
            position: fixed;
            top : 50px;
            right: 200px;
            background-color: gray;
            height: 100px;
            width: 550px;
            z-index: 20;
            border: solid black 3px;
        }
        
        .rond{
            position: relative;
            display: inline-block;
            overflow: hidden;
        
            top : 5px;
            margin: 7px;
            background-color: red;
            width: 8%;
            height: width;
            border-radius: 18px;
            border: solid white 1px;
            text-align: center;
            line-height: 2.2em;
        } */
        


// ------------------------------------------------------------------------------------------
<!--  Procedure de crÃ©ation des sprites -->
// ------------------------------------------------------------------------------------------
1) Dans le HTML

<div id="idBoiteEnergyBall1" class="boiteEnergyBall">
        <div id="idMasqueEnergyBall1" class="masqueEnergyBall">
          <img id="idSpriteEnergyBall" class="sprite" src="images/vil-coyote-energy-balls.png" />
        </div>
      </div>

Dans le ".js" du <HTML>   
    
    InsÃ©rer le script ".js" dans le head

    // ------------------------------------------------------------
    // ------------------------------------------------------------
    // Initialisation de l'Objet "EnergyBall" 
    // ------------------------------------------------------------
    energyBall = new EnergyBall('idBoiteEnergyBall','idMasqueEnergyBall','idSpriteEnergyBall');
    energyBall.initVar();


2) Dans le CSS
/* ------------------------- Energy Ball----------------------- */
/* ------------------------- Energy Ball----------------------- */
/* ------------------------- Energy Ball----------------------- */

.boiteEnergyBall{
    position: absolute;
    width: 45px;                // Penser a rediemnsioner Ã  la taille du nouveau sprite
    height: 45px;               // Penser a rediemnsioner Ã  la taille du nouveau sprite
    display : block;
    z-order: 20;
    border: solid black 1px;    
}

.masqueEnergyBall{
    position: relative;
    overflow: hidden;
    margin: auto;
    width: 45px;                // Penser a rediemnsioner Ã  la taille du nouveau sprite
    height: 45px;               // Penser a rediemnsioner Ã  la taille du nouveau sprite
    /* border: solid red 1px; */
}

 !!! Faire attention au "display:none;" et "z-index: xxx"

3) Dans les variables globales
var energyBall;               // Instance des Boules d'energie "EnergyBall" 


4) Creer un ".JS" par copie de Vil-Coyote et retirer ce qui est inutile
Changer les noms de propriÃ©taires
IntÃ©grer les coordonnÃ©es dans le tableau
Positionner Frame de debut, de fin, vitesse d'animation et de progression

// ------------------------------------------------------------------------------------------
Pour connaitre l objet courant associÃ© au "this"
// ------------------------------------------------------------------------------------------

// console.log('AA --- this.boite.style.left : '+this.boite.style.left);
// console.log('AA --- this instanceof Window : '+(this instanceof Window));
// console.log('AA --- this instanceof VilCoyote : '+(this instanceof VilCoyote));
// console.log('AA --- this instanceof EnergyBall : '+(this instanceof EnergyBall));


// ------------------------------------------------------------------------------------------
// Pour empÃªcher la selection des objets statiques Ã  l'Ã©cran
// ------------------------------------------------------------------------------------------
Introduced in IE 10.
See http://ie.microsoft.com/testdrive/HTML5/msUserSelect/
-ms-user-select: none;
-moz-user-select: -moz-none;
-khtml-user-select: none;
-webkit-user-select: none;


// ------------------------------------------------------------------------------------------
// Pour tester des fonction sur differents nbrowsers
// ------------------------------------------------------------------------------------------
e = e || window.event  


// ------------------------------------------------------------------------------------------
// Pour changer le zoom de l'Ã©cran
// ------------------------------------------------------------------------------------------
zoom: 0.5;
-moz-transform: scale(0.8);
-moz-transform-origin: 50% 200; */



// ------------------------------------------------------------------------------------------
// Rappel sur les selecteurs
// ------------------------------------------------------------------------------------------


Les sÃ©lecteurs de voisin direct
    Le combinateur '+' permet de sÃ©lectionner les nÅ“uds qui suivent immÃ©diatement un Ã©lÃ©ment donnÃ©.
    Syntaxe : A + B
    Exemple : div + p permettra de cibler n'importe quel Ã©lÃ©ment <p> qui suit immÃ©diatement un Ã©lÃ©ment <div>.

Les sÃ©lecteurs de voisins
    Le combinateur '~' permet de sÃ©lectionner les nÅ“uds qui suivent un Ã©lÃ©ment et qui ont le mÃªme parent.
    Syntaxe : A ~ B
    Exemple : p ~ span permettra de cibler les Ã©lÃ©ments <span> qui suivent un Ã©lÃ©ment <p> et qui ont le mÃªme Ã©lÃ©ment parent.

Les sÃ©lecteurs d'Ã©lÃ©ments fils
    Le combinateur '>' permet de sÃ©lectionner les selects nÅ“uds qui sont des fils directs d'un Ã©lÃ©ment donnÃ©.
    Syntaxe : A > B
    Exemple : ul > li permettra de cibler tous les Ã©lÃ©ments <li> qui sont directement situÃ©s sous un Ã©lÃ©ment <ul>.

Les sÃ©lecteurs d'Ã©lÃ©ments descendants
    Le combinateur [ ]  permet de sÃ©lectionner les nÅ“uds qui sont des descendants (pas nÃ©cessairement des fils directs) d'un Ã©lÃ©ment donnÃ©.
    Syntaxe : A B
    Exemple : div span permettra de cibler n'importe quel Ã©lÃ©ment <span> situÃ© Ã  l'intÃ©rieur d'un Ã©lÃ©ment <div>. 




// ---------------------------------------- A garder quelques temps, in case of... --------------------------------------------------
// (this.keyPressedMatrix & 9) === 9 ? console.log('Bas Droite') : '';                                     // 9 - Combo en bas Ã  droite (BD) 
// (this.keyPressedMatrix & 5) === 5 ? console.log('Haut Droite') : '';                                    // 5 - Combo en haut Ã  droite (HD) 
// (this.keyPressedMatrix & 10) === 10 ? console.log('Bas Gauche') : '';                                   // 10 - Combo en bas Ã  gauche (BG)
// (this.keyPressedMatrix & 6) === 6 ? console.log('Haut Gauche') : '';                                    // 6 - Combo en Haut Ã  gauche (HG)

this.idxKeyOffCode === 0 ? console.log('ESCAPE') : '';                       // touche 'Esc' --> On sort et Go to menu : PrioriÃ© maximum 
this.idxKeyOffCode === 7 ? console.log('Droite') : '';                       // 1 - "A droite" 
this.idxKeyOffCode === 6 ? console.log('Gauche') : '';                       // 2 - "A gauche" 
this.idxKeyOffCode === 2 ? console.log('Espace') : '';                       // 32 - "ESPACE" --> Tir
// ---------------------------------------- A garder quelques temps, in case of... --------------------------------------------------













// console.log('i : '+i+' --- '+vautour.length+
// ' --- vautour[i].frameActif : '+vautour[i].frameActif+
// ' --- vautour[i].frameData[vautour[i].frameActif].offsetBoiteMasqueH : '+vautour[i].frameData[vautour[i].frameActif].offsetBoiteMasqueH+
// ' --- vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueH : '+vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueH+
// ' --- vautour[i].frameData[vautour[i].frameActif].offsetBoiteMasqueV : '+vautour[i].frameData[vautour[i].frameActif].offsetBoiteMasqueV+
// ' --- vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueV : '+vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueV
// );

//                     if (vautour[i].boite.style.display == 'block') {
// console.log('B1    i : '+i+
// ' --- vautour[i].boite.style.left : '+vautour[i].boite.style.left+
// ' --- vautour[i].frameData[vautour[i].frameActif].offsetBoiteMasqueH : '+vautour[i].frameData[vautour[i].frameActif].offsetBoiteMasqueH+
// ' --- somme : '+(parseInt(vautour[i].boite.style.left) + vautour[i].frameData[vautour[i].frameActif].offsetBoiteMasqueH)+
// ' --- this.boite.style.left : '+this.boite.style.left+
// ' --- this.frameData[this.frameActif].thicknessBoiteMasqueH : '+this.frameData[this.frameActif].thicknessBoiteMasqueH+
// ' --- somme : '+(parseInt(vautour[i].boite.style.left) + vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueH)
// );

// console.log('B2   i : '+i+
// ' --- vautour[i].boite.style.left : '+vautour[i].boite.style.left+
// ' --- vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueH : '+vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueH+
// ' --- somme : '+(parseInt(vautour[i].boite.style.left) + vautour[i].frameData[vautour[i].frameActif].thicknessBoiteMasqueH)+
// ' --- this.boite.style.left : '+this.boite.style.left+
// ' --- this.frameData[this.frameActif].offsetBoiteMasqueH : '+this.frameData[this.frameActif].offsetBoiteMasqueH+
// ' --- somme : '+(parseInt(vautour[i].boite.style.left) + vautour[i].frameData[this.frameActif].offsetBoiteMasqueH)
// );


// console.log('B"    i : '+i+' --- vautour[i].boite.style.left : '+vautour[i].boite.style.left+' --- vautour[i].frameData[this.frameActif].offsetBoiteMasqueH : '+vautour[i].frameData[this.frameActif].offsetBoiteMasqueH+' --- this.boite.style.left : '+this.boite.style.left+' --- this.frameData[this.frameActif].thicknessBoiteMasqueH : '+this.frameData[this.frameActif].thicknessBoiteMasqueH+' --- Somme : '+(parseInt(this.boite.style.left) + this.frameData[this.frameActif].thicknessBoiteMasqueH));
// console.log('C"    i : '+i+' --- vautour[i].boite.style.left : '+vautour[i].boite.style.left+' --- vautour[i].frameData[this.frameActif].thicknessBoiteMasqueH : '+vautour[i].frameData[this.frameActif].thicknessBoiteMasqueH+' --- Somme : '+(parseInt(vautour[i].boite.style.left) + vautour[i].frameData[this.frameActif].thicknessBoiteMasqueH)+' --- this.boite.style.left : '+this.boite.style.left+' --- this.frameData[this.frameActif].offsetBoiteMasqueH : '+this.frameData[this.frameActif].offsetBoiteMasqueH+' --- Somme : '+(parseInt(this.boite.style.left)+this.frameData[this.frameActif].offsetBoiteMasqueH));




// console.log('D vautour[i].boite.style.top : '+vautour[i].boite.style.top+' --- vautour[i].frameData[this.frameActif].thicknessBoiteMasqueV) : '+vautour[i].frameData[this.frameActif].thicknessBoiteMasqueV+
// ' --- somme : '+((vautour[i].masque.style.top) + vautour[i].frameData[this.frameActif].thicknessBoiteMasqueV)
// + ' --- this.boite.style.top : '+this.boite.style.top+' --- this.frameData[this.frameActif].style.offsetBoiteMasqueV : '+this.frameData[this.frameActif].offsetBoiteMasqueV+
// ' --- somme : '+(parseInt(this.boite.style.top)+this.frameData[this.frameActif].offsetBoiteMasqueV));

// if ((parseInt(vautour[i].masque.style.top) + vautour[i].getHorizontalSpriteHeight()) >= parseInt(this.masque.style.top)){  // La collision est de plus en plus potentielle 

                                
// console.log('D" vautour[i].boite.style.top : '+vautour[i].boite.style.top+' --- vautour[i].frameData[this.frameActif].thicknessBoiteMasqueV) : '+vautour[i].frameData[this.frameActif].thicknessBoiteMasqueV+
// ' --- somme : '+((vautour[i].masque.style.top) + vautour[i].frameData[this.frameActif].thicknessBoiteMasqueV)
// + ' --- this.boite.style.top : '+this.boite.style.top+' --- this.frameData[this.frameActif].style.offsetBoiteMasqueV : '+this.frameData[this.frameActif].offsetBoiteMasqueV+
// ' --- somme : '+(parseInt(this.boite.style.top)+this.frameData[this.frameActif].offsetBoiteMasqueV));
                                                                        


// console.log(
// 'E vautour[i].boite.style.top : '+vautour[i].boite.style.top+
// ' --- vautour[i].frameData[this.frameActif].offsetBoiteMasqueV : '+vautour[i].frameData[this.frameActif].offsetBoiteMasqueV+
// ' --- somme :'+(parseInt(vautour[i].boite.style.top) + vautour[i].frameData[this.frameActif].offsetBoiteMasqueV)+
// ' --- this.boite.style.top : '+this.boite.style.top+
// ' --- this.frameData[this.frameActif].thicknessBoiteMasqueV : '+this.frameData[this.frameActif].thicknessBoiteMasqueV+
// ' --- somme : '+ (parseInt(this.boite.style.top) + this.frameData[this.frameActif].thicknessBoiteMasqueV)
// );

// console.log(
    // 'E" vautour[i].boite.style.top : '+vautour[i].boite.style.top+
    // ' --- vautour[i].frameData[this.frameActif].offsetBoiteMasqueV : '+vautour[i].frameData[this.frameActif].offsetBoiteMasqueV+
    // ' --- somme :'+(parseInt(vautour[i].boite.style.top) + vautour[i].frameData[this.frameActif].offsetBoiteMasqueV)+
    // ' --- this.boite.style.top : '+this.boite.style.top+
    // ' --- this.frameData[this.frameActif].thicknessBoiteMasqueV : '+this.frameData[this.frameActif].thicknessBoiteMasqueV+
    // ' --- somme : '+ (parseInt(this.boite.style.top) + this.frameData[this.frameActif].thicknessBoiteMasqueV)
    // );
                                                
